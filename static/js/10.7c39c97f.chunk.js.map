{"version":3,"sources":["pages/Login.js"],"names":["Wrapper","styled","div","Title","h1","layout","labelCol","span","wrapperCol","Component","AuthStore","useStores","history","useHistory","name","onFinish","values","setUsername","username","setPassword","password","console","log","login","then","push","catch","onFinishFailed","errorInfo","autoComplete","Item","label","rules","required","message","validator","rule","value","test","Promise","reject","length","resolve","min","max","Password","offset","type","htmlType"],"mappings":"yeAQA,IAAMA,EAAQC,IAAOC,IAAR,KAQPC,EAAMF,IAAOG,GAAR,KAMLC,EAAO,CACbC,SAAS,CACLC,KAAK,GAETC,WAAW,CACPD,KAAK,KAqHME,UA1GG,WAAO,IAChBC,EAAYC,cAAZD,UACDE,EAAQC,cA8Bd,OACE,kBAACb,EAAD,KACA,kBAACG,EAAD,qBACA,kBAAC,IAAD,iBACIE,EADJ,CAEES,KAAK,QACLR,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,IAGRQ,SA1Ca,SAACC,GAChBN,EAAUO,YAAYD,EAAOE,UAC7BR,EAAUS,YAAYH,EAAOI,UAC7BC,QAAQC,IAAI,WAAYN,GACxBN,EAAUa,QAAQC,MAAK,WACrBH,QAAQC,IAAI,4EACZV,EAAQa,KAAK,QACdC,OAAM,WACPL,QAAQC,IAAI,wGAmCVK,eA1BmB,SAACC,GACtBP,QAAQC,IAAI,UAAWM,IA0BrBC,aAAa,QAEb,kBAAC,IAAKC,KAAN,CACEC,MAAM,qBACNjB,KAAK,WACLkB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,8CAGX,CACEC,UAnCa,SAACC,EAAKC,GACzB,MAAG,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,sEACxCH,EAAMI,OAAO,GAAMJ,EAAMI,OAAO,GAAWF,QAAQC,OAAO,8DACrDD,QAAQG,cAoCd,kBAAC,IAAD,OAGF,kBAAC,IAAKZ,KAAN,CACEC,MAAM,eACNjB,KAAK,WACLkB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,wCAEX,CACES,IAAI,EACHT,QAAQ,2DAGV,CACAU,IAAI,GACHV,QAAQ,oEAIZ,kBAAC,IAAMW,SAAP,OAKF,kBAAC,IAAKf,KAAN,CACEtB,WAAY,CACVsC,OAAQ,EACRvC,KAAM,KAGR,kBAAC,IAAD,CAAQwC,KAAK,UAAUC,SAAS,UAAhC","file":"static/js/10.7c39c97f.chunk.js","sourcesContent":["import { Button, Checkbox, Form, Input } from 'antd';\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\nimport {useStores} from '../stores';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\n\r\nconst Wrapper=styled.div`\r\nmax-width:600px;\r\nmargin:100px  auto;\r\nbox-shadow:2px 2px 4px 4px rgba(0,0,0,0.2);\r\nborder-radius:5px;\r\npadding:18px;\r\n`\r\n\r\nconst Title=styled.h1`\r\nmargin-bottom:30px;\r\ntext-align:center;\r\n`\r\n\r\n\r\nconst layout={\r\nlabelCol:{\r\n    span:6,\r\n},\r\nwrapperCol:{\r\n    span:18\r\n},\r\n};\r\n\r\nconst tailLayout={\r\n    wrapperCol:{\r\n        offset:6,\r\n        span:18\r\n    }\r\n};\r\n\r\nconst Component = () => {\r\n  const {AuthStore} =useStores() ;\r\n  const history=useHistory ();\r\n  const onFinish = (values) => {\r\n    AuthStore.setUsername(values.username);\r\n    AuthStore.setPassword(values.password);\r\n    console.log('Success:', values);\r\n    AuthStore.login().then(()=>{\r\n      console.log('登录成功，即将跳转到首页')\r\n      history.push('/')\r\n  }).catch(()=>{\r\n    console.log('登录失败，请重新检查用户名与密码')\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  const validateUsername=(rule,value)=>{\r\n      if(/\\W/.test(value)) return Promise.reject('只能是字母数字下划线哦');\r\n      if(value.length<4  || value.length>10) return Promise.reject('输入长度为4-10个字符哦');\r\n       return Promise.resolve ();\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <Wrapper> \r\n    <Title>登录</Title>\r\n    <Form\r\n    {...layout}\r\n      name=\"basic\"\r\n      labelCol={{\r\n        span: 8,\r\n      }}\r\n      wrapperCol={{\r\n        span: 16,\r\n      }}\r\n    \r\n      onFinish={onFinish}\r\n      onFinishFailed={onFinishFailed}\r\n      autoComplete=\"off\"\r\n    >\r\n      <Form.Item\r\n        label=\"用户名\"\r\n        name=\"username\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入用户名哦',\r\n          },\r\n         \r\n          {\r\n            validator:validateUsername\r\n          }\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"密码\"\r\n        name=\"password\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入密码哦',\r\n          },\r\n          {\r\n            min:4,\r\n             message:'最少要输入4个字符哦'\r\n             },\r\n \r\n           {\r\n           max:10,\r\n            message:'最多只能输入10个字符哦'\r\n            }\r\n        ]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n     \r\n\r\n      <Form.Item\r\n        wrapperCol={{\r\n          offset: 8,\r\n          span: 16,\r\n        }}\r\n      >\r\n        <Button type=\"primary\" htmlType=\"submit\">\r\n          提交\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n    </Wrapper>\r\n  );\r\n  \r\n};\r\n\r\nexport default Component;"],"sourceRoot":""}