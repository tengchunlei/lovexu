{"version":3,"sources":["components/Uploader.js","components/Tips.js","pages/Home.js"],"names":["Dragger","Upload","Result","styled","div","H1","h1","Image","img","Component","observer","useStores","ImageStore","UserStore","ref1","useRef","ref2","store","useLocalStore","width","setWidth","height","setHeight","serverFile","attributes","url","widthStr","heightStr","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","message","warning","window","test","type","size","error","upload","then","console","log","catch","tip","spinning","isUpoading","className","InboxOutlined","target","href","filename","src","ref","onChange","current","value","placeholder","fullStr","Tips","children","Home","Uploader"],"mappings":"ohBAMOA,EAAUC,IAAVD,QACDE,EAAOC,IAAOC,IAAR,KAKNC,EAAGF,IAAOG,GAAR,KAIFC,EAAOJ,IAAOK,IAAT,KAoIKC,EAhIAC,aAAS,WAAK,IAAD,EACCC,cAAvBC,EADsB,EACtBA,WAAWC,EADW,EACXA,UACZC,EAAKC,mBACLC,EAAKD,mBAGLE,EAAQC,aAAc,iBAAK,CAC5BC,MAAM,KACNC,SAF4B,SAEnBD,GACLF,EAAME,MAAMA,GAGhB,eACC,OAAOF,EAAME,MAAN,aAAkBF,EAAME,OAAQ,IAGxCE,OAAO,KACPC,UAX4B,SAWlBD,GACTJ,EAAMI,OAAOA,GAEd,gBAEC,OAAQJ,EAAMI,OAAN,aAAmBJ,EAAMI,QAAS,IAG3C,cACC,OAAOT,EAAWW,WAAWC,WAAWC,IAAID,WAAWC,IAAK,gBAAgBR,EAAMS,SAAST,EAAMU,eAehGC,EAAM,CACXC,gBAAe,EACfC,aAAa,SAAAC,GAGX,OAFAnB,EAAWoB,QAAQD,GACnBnB,EAAWqB,YAAYF,EAAKG,MACD,OAAxBrB,EAAUsB,aACXC,IAAQC,QAAQ,mFACR,IAGdC,OAAOP,KAAKA,EACJ,wCAAwCQ,KAAKR,EAAKS,MAKnDT,EAAKU,KAAK,SACXL,IAAQM,MAAM,yEACP,IAIT9B,EAAW+B,SACVC,MAAK,SAACrB,GACLsB,QAAQC,IAAI,4BACZD,QAAQC,IAAIvB,MACXwB,OAAM,WACPF,QAAQC,IAAI,gCAEP,IAjBLV,IAAQM,MAAM,2EACP,MAoBb,OACA,6BACE,kBAAC,IAAD,CAAMM,IAAI,qBAAMC,SAAUrC,EAAWsC,YACvC,kBAAClD,EAAY4B,EACT,uBAAGuB,UAAU,wBACX,kBAACC,EAAA,EAAD,OAEF,uBAAGD,UAAU,mBAAb,sEACA,uBAAGA,UAAU,mBAAb,sHAOHvC,EAAWW,WACX,kBAACrB,EAAD,KACD,kBAACG,EAAD,iCACA,4BACE,wDACA,4BACE,uBAAGgD,OAAO,SAASC,KAAM1C,EAAWW,WAAWC,WAAWC,IAAID,WAAWC,KAAMb,EAAWW,WAAWC,WAAWC,IAAID,WAAWC,MAGjI,kDACA,4BACCb,EAAW2C,UAGZ,wDACA,4BACF,kBAAChD,EAAD,CAAOiD,IAAK5C,EAAWW,WAAWC,WAAWC,IAAID,WAAWC,OAG5D,wDACA,4BACA,2BAAOgC,IAAK3C,EAAM4C,SA7EI,WACnBzC,EAAMG,SAASN,EAAK6C,QAAQC,QA4EcC,YAAY,uEACzD,2BAAOJ,IAAKzC,EAAM0C,SA1EK,WACrBzC,EAAMK,UAAUN,EAAK2C,QAAQC,QAyEeC,YAAY,wEAG1D,4BACE,uBAAGR,OAAO,SAASC,KAAMrC,EAAM6C,SAAU7C,EAAM6C,YAItC,S,mKCvIX,IAAMC,EAAO5D,IAAOC,IAAV,KAmBKK,EATEC,aAAS,YAAe,IAAbsD,EAAY,EAAZA,SACjBnD,EAAWF,cAAXE,UACP,OACI,oCACAA,EAAUsB,YAAY,KAAM,kBAAC4B,EAAD,KAAOC,GADnC,QCZDC,EAAOvD,aAAS,WACDC,cAAXE,UAGP,OACI,oCACC,kBAAC,EAAD,mGACA,kBAACqD,EAAD,UAQMD","file":"static/js/9.1aa198e9.chunk.js","sourcesContent":["import React ,{useRef}from 'react';\r\nimport {useStores} from '../stores';\r\nimport {observer,useLocalStore} from 'mobx-react';\r\nimport  {message, Upload,Spin}  from   'antd';\r\nimport  {InboxOutlined} from '@ant-design/icons';\r\nimport styled from 'styled-components';\r\nconst {Dragger} =Upload;\r\nconst Result=styled.div`\r\nmargin-top:15px;\r\nborder:1px dashed #ccc;\r\npadding:18px;\r\n`\r\nconst H1=styled.h1`\r\nmargin:18px;\r\ntext-align:center;\r\n`\r\nconst Image =styled.img`\r\nmax-width:300px;\r\n\r\n`\r\nconst Component=observer(()=>{\r\nconst {ImageStore,UserStore} =useStores();\r\nconst ref1=useRef();\r\nconst ref2=useRef();\r\n\r\n\r\nconst store = useLocalStore(()=>({\r\n     width:null,\r\n     setWidth(width){\r\n         store.width=width;\r\n     },\r\n\r\n     get widthStr(){\r\n      return store.width?`/w/${store.width}`:'';\r\n     },\r\n\r\n     height:null,\r\n     setHeight(height){\r\n      store.height=height;\r\n  },\r\n     get heightStr(){\r\n\r\n      return  store.height?`/h/${store.height}`:'';\r\n     },\r\n\r\n     get fullStr(){\r\n      return ImageStore.serverFile.attributes.url.attributes.url +'?imageView2/0'+store.widthStr+store.heightStr\r\n     }\r\n\r\n\r\n\r\n}));\r\n\r\nconst bindWidthChange=()=>{\r\n   store.setWidth(ref1.current.value);\r\n};\r\n\r\nconst bindHeightChange=()=>{\r\n  store.setHeight(ref2.current.value);\r\n};\r\n\r\nconst  props={\r\n  showUploadList:false,\r\n  beforeUpload:file=>{\r\n    ImageStore.setFile(file);\r\n    ImageStore.setFilename(file.name);\r\n    if(UserStore.currentUser===null ){\r\n      message.warning('请您先登录再进行上传操作哦');\r\n       return false;\r\n    }   \r\n    \r\nwindow.file=file;\r\n    if(!/(svg)$|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)){\r\n      message.error('只能上传png/jpg/jpeg/gif类型的图片')\r\n      return false;\r\n    }\r\n\r\n    if(file.size>1024*1024){\r\n      message.error('仅限上传1M以内大小的图片');\r\n      return false;\r\n    }\r\n\r\n\r\n    ImageStore.upload()\r\n    .then((serverFile)=>{\r\n      console.log('上传成功')\r\n      console.log(serverFile);\r\n    }).catch(()=>{\r\n      console.log('上传失败')\r\n    });\r\n    return false; \r\n  }\r\n}; \r\n\r\nreturn (\r\n<div>\r\n  <Spin tip=\"上传中\" spinning={ImageStore.isUpoading}>\r\n<Dragger {...props}>\r\n    <p className=\"ant-upload-drag-icon\">\r\n      <InboxOutlined />\r\n    </p>\r\n    <p className=\"ant-upload-text\">点击或者拖拽文件上传哦</p>\r\n    <p className=\"ant-upload-hint\">\r\n      仅限上传.png/.jpg/.gif类型的图片且最大不超过1M哦\r\n    </p>\r\n  </Dragger>\r\n</Spin>\r\n\r\n{ \r\n ImageStore.serverFile?\r\n <Result>\r\n<H1>上传结果</H1>\r\n<dl>\r\n  <dt>在线预览</dt>\r\n  <dd>\r\n    <a target=\"_blank\" href={ImageStore.serverFile.attributes.url.attributes.url}>{ImageStore.serverFile.attributes.url.attributes.url}</a>\r\n  </dd>\r\n\r\n  <dt>文件名</dt>\r\n  <dd>\r\n  {ImageStore.filename}\r\n  </dd>\r\n\r\n  <dt>预览图片</dt>\r\n  <dd>\r\n<Image src={ImageStore.serverFile.attributes.url.attributes.url}/>\r\n  </dd>\r\n\r\n<dt>更多尺寸</dt>\r\n<dd>\r\n<input ref={ref1} onChange={bindWidthChange} placeholder=\"请在此处输入最大宽度哦\"/>\r\n<input ref={ref2} onChange={bindHeightChange} placeholder=\"请在此处输入最大高度哦\"/>\r\n</dd>\r\n\r\n<dd>\r\n  <a target=\"_blank\" href={store.fullStr}>{store.fullStr}</a>\r\n</dd>\r\n</dl>\r\n\r\n </Result>:null\r\n}\r\n\r\n</div>\r\n);\r\n});\r\n\r\n\r\n\r\nexport default  Component;","import React from 'react';\r\nimport {useStores} from '../stores';\r\nimport {observer} from 'mobx-react';\r\nimport styled from 'styled-components';\r\nconst Tips = styled.div`\r\nbackground:rgb(64, 169, 255);\r\npadding:10px;\r\nmargin:30px 0;\r\ncolor :#fff;\r\nborder-radius;\r\n`\r\n\r\n\r\n\r\nconst Component =observer(({children})=>{\r\n    const {UserStore}=useStores();\r\n    return (\r\n        <>{\r\n        UserStore.currentUser?null: <Tips>{children}</Tips>\r\n       } </>     \r\n    ); \r\n});\r\n\r\nexport default Component;","import { observer } from 'mobx-react-lite';\r\nimport React from 'react'\r\nimport { useStores } from '../stores';\r\nimport Uploader from '../components/Uploader';\r\nimport Tips from '../components/Tips';\r\nconst  Home = observer(()=>{\r\n    const {UserStore}=useStores();\r\n    const User=()=><div>Hello{UserStore.currentUser.attributes.usernames}</div>\r\n    \r\n    return (\r\n        <>\r\n         <Tips>请您先登录然后再进行上传操作哦</Tips>\r\n         <Uploader/>\r\n  \r\n        </>\r\n\r\n    );\r\n    \r\n});\r\n\r\nexport default Home;"],"sourceRoot":""}