(this.webpackJsonpzhangxu=this.webpackJsonpzhangxu||[]).push([[2],{104:function(e,t,n){e.exports=n(120)},109:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(29),a=n.n(i);n(109);var c=n(30),u=n(49),l=n(35),s=n(97),p=n.n(s),f=n(31),b=n(121),m=n(79),g=n(84);function y(){var e=Object(c.a)(["\nmargin-left:15px;\n\n\n"]);return y=function(){return e},e}function h(){var e=Object(c.a)(["\n  margin-left: auto;\n"]);return h=function(){return e},e}function O(){var e=Object(c.a)(["\nheight:30px;\nmargin-left:30px;\n"]);return O=function(){return e},e}function d(){var e=Object(c.a)(["\ncolor:#fff;\nmargin-left:38px;\n\n&.active{\n    border-bottom:3px solid rgb(24, 144, 255);\n}\n"]);return d=function(){return e},e}function j(){var e=Object(c.a)(["\ndisplay:flex;\nalign-items:center;\nbackground-color:rgb(52, 58, 64);\npadding: 15px 100px;\ncolor:#fff;\n"]);return j=function(){return e},e}var v=f.a.header(j()),w=Object(f.a)(u.b)(d()),U=f.a.img(O()),P=f.a.div(h()),E=Object(f.a)(b.a)(y()),k=Object(g.a)((function(){var e=Object(l.f)(),t=Object(m.a)(),n=t.UserStore,r=t.AuthStore;return o.a.createElement(v,null,o.a.createElement(U,{src:p.a}),o.a.createElement("nav",null,o.a.createElement(w,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),o.a.createElement(w,{to:"/history",activeClassName:"active"},"\u5386\u53f2\u4e0a\u4f20"),o.a.createElement(w,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u7231\u65ed")),o.a.createElement(P,null,n.currentUser?o.a.createElement(o.a.Fragment,null,n.currentUser.attributes.username,o.a.createElement(E,{type:"primary",onClick:function(){r.logout()}},"\u7acb\u5373\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(E,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),e.push("/login")}},"\u70b9\u51fb\u767b\u5f55"),o.a.createElement(E,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")}},"\u6ce8\u518c\u8d26\u6237"))))}));function z(){var e=Object(c.a)(["\ntext-align:center;\nwidth:100%;\nheight:32px;\nbackground-color:rgb(52, 58, 64);\ncolor:#fff;\nfont-size:16px;\n"]);return z=function(){return e},e}var x=f.a.footer(z());var F=function(){return o.a.createElement(x,null,o.a.createElement("p",null,"Copyright\xa9 2019-2022 \u7231\u65ed\u56fe\u5e8a \u6ed5\u6625\u96f7 \u7248\u6743\u6240\u6709\u4fb5\u6743\u5fc5\u7a76"))},D=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,272))})),C=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,273))})),S=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,265))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,266))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,267))}));var M=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",null,"Loading")},o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:D}),o.a.createElement(l.a,{path:"/history",component:C}),o.a.createElement(l.a,{path:"/about",component:S}),o.a.createElement(l.a,{path:"/login",component:L}),o.a.createElement(l.a,{path:"/register",component:I})))),o.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(119),n(24);a.a.render(o.a.createElement(u.a,null,o.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(25),o=n.n(r);n(110);o.a.init({appId:"6wFgmvwt68oalbCtVNN1M2ky-gzGzoHsz",appKey:"AdHML4fTP8rw9J7swg8yK86r",serverURL:"https://6wfgmvwt.lc-cn-n1-shared.com"});var i={register:function(e,t){var n=new r.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},login:function(e,t){return new Promise((function(n,o){r.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return o(e)}))}))},logout:function(){r.User.logOut()},getCurrentUser:function(){return r.User.current()}},a={add:function(e,t){var n=new o.a.Object("Image"),r=new o.a.File(t,e);return n.set("filename",t),n.set("owner",o.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,a=new o.a.Query("Image");return a.include("owner"),a.limit(i),a.skip(n*i),a.descending("createdAt"),a.equalTo("owner",o.a.User.current()),new Promise((function(e,t){a.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}};window.Uploader=a},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r,o,i,a,c,u,l,s,p,f,b,m,g,y,h=n(0),O=n(21),d=n(32),j=n(33),v=n(10),w=(n(61),n(102)),U=n(3),P=n(24),E=new(r=function(){function e(){Object(d.a)(this,e),Object(O.a)(this,"currentUser",o,this)}return Object(j.a)(e,[{key:"pullUser",value:function(){this.currentUser=P.a.getCurrentUser()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),o=Object(v.a)(r.prototype,"currentUser",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(v.a)(r.prototype,"pullUser",[U.m],Object.getOwnPropertyDescriptor(r.prototype,"pullUser"),r.prototype),Object(v.a)(r.prototype,"resetUser",[U.f],Object.getOwnPropertyDescriptor(r.prototype,"resetUser"),r.prototype),r),k=new(i=function(){function e(){Object(d.a)(this,e),Object(O.a)(this,"list",a,this),Object(O.a)(this,"isLoading",c,this),Object(O.a)(this,"hasMore",u,this),Object(O.a)(this,"page",l,this),this.limit=10}return Object(j.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,P.b.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){w.b.error("\u6570\u636e\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.Loading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),a=Object(v.a)(i.prototype,"list",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(v.a)(i.prototype,"isLoading",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(v.a)(i.prototype,"hasMore",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=Object(v.a)(i.prototype,"page",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(v.a)(i.prototype,"append",[U.f],Object.getOwnPropertyDescriptor(i.prototype,"append"),i.prototype),Object(v.a)(i.prototype,"find",[U.f],Object.getOwnPropertyDescriptor(i.prototype,"find"),i.prototype),Object(v.a)(i.prototype,"reset",[U.f],Object.getOwnPropertyDescriptor(i.prototype,"reset"),i.prototype),i),z=new(s=function(){function e(){Object(d.a)(this,e),Object(O.a)(this,"filename",p,this),Object(O.a)(this,"file",f,this),Object(O.a)(this,"isUpoading",b,this),Object(O.a)(this,"serverFile",m,this)}return Object(j.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUpoading=!0,this.serverFile=null,new Promise((function(t,n){P.b.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){w.b.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUpoading=!1}))}))}},{key:"reset",value:function(){this.isUpoading=!1,this.serverFile=null}}]),e}(),p=Object(v.a)(s.prototype,"filename",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=Object(v.a)(s.prototype,"file",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(v.a)(s.prototype,"isUpoading",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(v.a)(s.prototype,"serverFile",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(v.a)(s.prototype,"setFilename",[U.f],Object.getOwnPropertyDescriptor(s.prototype,"setFilename"),s.prototype),Object(v.a)(s.prototype,"setFile",[U.f],Object.getOwnPropertyDescriptor(s.prototype,"setFile"),s.prototype),Object(v.a)(s.prototype,"upload",[U.f],Object.getOwnPropertyDescriptor(s.prototype,"upload"),s.prototype),Object(v.a)(s.prototype,"reset",[U.f],Object.getOwnPropertyDescriptor(s.prototype,"reset"),s.prototype),s),x=new(g=function(){function e(){Object(d.a)(this,e),Object(O.a)(this,"values",y,this)}return Object(j.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){P.a.login(e.values.username,e.values.password).then((function(e){E.pullUser(),t(e)})).catch((function(e){E.resetUser(),w.b.error("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u68c0\u67e5\u7528\u6237\u540d\u4e0e\u5bc6\u7801"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){P.a.register(e.values.username,e.values.password).then((function(e){E.pullUser(),t(e)})).catch((function(e){E.resetUser(),w.b.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){P.a.logout(),E.resetUser(),k.reset(),z.reset()}}]),e}(),y=Object(v.a)(g.prototype,"values",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(v.a)(g.prototype,"setUsername",[U.f],Object.getOwnPropertyDescriptor(g.prototype,"setUsername"),g.prototype),Object(v.a)(g.prototype,"setPassword",[U.f],Object.getOwnPropertyDescriptor(g.prototype,"setPassword"),g.prototype),Object(v.a)(g.prototype,"login",[U.f],Object.getOwnPropertyDescriptor(g.prototype,"login"),g.prototype),Object(v.a)(g.prototype,"register",[U.f],Object.getOwnPropertyDescriptor(g.prototype,"register"),g.prototype),Object(v.a)(g.prototype,"logout",[U.f],Object.getOwnPropertyDescriptor(g.prototype,"logout"),g.prototype),g),F=Object(h.createContext)({AuthStore:x,UserStore:E,ImageStore:z,HistoryStore:k});window.stores={AuthStore:x,UserStore:E,ImageStore:z,HistoryStore:k};var D=function(){return Object(h.useContext)(F)}},97:function(e,t,n){e.exports=n.p+"static/media/logo.46acb1da.svg"}},[[104,3,4]]]);
//# sourceMappingURL=main.cbbb3e35.chunk.js.map